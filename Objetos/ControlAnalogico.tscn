[gd_scene load_steps=4 format=2]

[ext_resource path="res://Sprites/big_circle.png" type="Texture" id=1]
[ext_resource path="res://Sprites/small_circle.png" type="Texture" id=2]

[sub_resource type="GDScript" id=1]

resource_name = "ControlAnalogico.gd"
script/source = "extends Node2D

var pressed = false
var posBola
var fuerza = Vector2()
var centroControl
var sizeCentro

func _ready():
	pass

func _process(delta):
	pass

func _input(event):
	if event is InputEventScreenDrag:
		updateBolaPosition(event.position)
	pass

func updateBolaPosition(event):
	posBola = get_node(\"Bola\")
	centroControl = get_node(\"FondoCentro\").global_position
	sizeCentro = get_node(\"FondoCentro\").texture.get_size()
	calcularFuerza(event)
	posBola.x = sizeCentro.x/2 * fuerza.x
	posBola.y = sizeCentro.y/2 * -fuerza.y
	get_node(\"Bola\").position = posBola 
	pass

func calcularFuerza(event):
	fuerza.x = (event.x - centroControl.x)/(sizeCentro.x/2)
	fuerza.y = (event.y - centroControl.y)/(sizeCentro.y/2)
	pass"
_sections_unfolded = [ "Resource" ]

[node name="ControlAnalogico" type="Node2D" index="0"]

position = Vector2( 527.274, 321.023 )
script = SubResource( 1 )

[node name="FondoCentro" type="Sprite" parent="." index="0"]

self_modulate = Color( 1, 1, 1, 0.176824 )
texture = ExtResource( 1 )
_sections_unfolded = [ "Material", "Visibility" ]

[node name="Bola" type="Sprite" parent="." index="1"]

scale = Vector2( 0.7, 0.7 )
texture = ExtResource( 2 )
_sections_unfolded = [ "Transform" ]

[node name="Label" type="Label" parent="." index="2"]

anchor_left = 0.0
anchor_top = 0.0
anchor_right = 0.0
anchor_bottom = 0.0
margin_left = -19.0
margin_top = -81.0
margin_right = 21.0
margin_bottom = -67.0
rect_pivot_offset = Vector2( 0, 0 )
mouse_filter = 2
mouse_default_cursor_shape = 0
size_flags_horizontal = 1
size_flags_vertical = 4
text = "TEST"
align = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1


